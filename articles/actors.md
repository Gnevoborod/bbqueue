# Процесс взаимодействий с очередью в общем виде

## Посетитель
Выбирает на экране устройства выдачи талонов цель посещения. Цели декомпозированы по отделам предприятия или направлениям деятельности.

В очереди регистрируется новый талон, ему присваивается уникальный символьно-цифровой номер, после чего осуществляется печать талона.
Далее посетитель ждёт своей очереди.
На экране электронной очереди отображаются обслуживаемые номера талонов.
Самым верхним является номер который был вызван последним.



## Окно приёма посетителей

### Начало работы
Сотрудник с обычными правами авторизуется в системе.
Затем выбирает в выпадающем списке номер окна в котором собирается работать.
Нажимает кнопку "Начать работу с очередью".


### Процесс работы

_**Для приёма следующего посетителя**_ 
Нажимает кнопку "Пригласить следующего посетителя". 

Если в течение определённого времени посетитель не подошёл к сотруднику - сотрудник опять нажимает кнопку "Пригласить следующего посетителя" (или иные, описанные ниже кнопки). 
На стороне бэкэнда повторное нажатие кнопки блокируется на определённое время (равное времени, которого отсчитывает сотрудник перед следующим нажатием кнопки, в случае, если посетитель не подошёл).

_**Для завершения работы с очередным посетителем**_
Нажимает кнопку "Завершить работу с посетителем".

Данный функционал под вопросом, так как при необходимости отслеживания времени обслуживания посетителя данный функционал может привести к попыткам мошенничества, и лучше будет использовать кнопку "Пригласить следующего посетителя".

_**Для ухода на перерыв**_ 
Нажимает кнопку "Приостановить приём".


_**Для перевода талона в другое окно**_ 
Нажимает кнопку "Переадресовать посетителя к другому сотруднику".
После нажатия на кнопку появляется модальное окно со списком сотрудников.

В списке сотрудников отсутствует сотрудник из того же отдела или обслуживающий те же цели посещения.

_**Для повторного вызова посетителя**_ 
Нажимает кнопку "Пригласить посетителя с талоном номер".
После нажатия на кнопку появляется модальное окно со списком талонов для приглашения.

В списке отображаются только талоны, которые ранее были обслужены сотрудником.

_**Для перехода в режим ожидания**_
Нажимает кнопку "Ожидать посетителей".

### Сотрудник с правами управляющего
Имеет все те же возможности что и у сотрудника с обычными правами. Кроме них:

_**Базовое администрирование сотрудников**_ 
Добавляет сотрудников в список сотрудников работающих с электронной очередью, а кроме того блокирует\разблокирует сотрудников.

_**Распределение по отделам\целям**_ 
Прикрепляет сотрудника к тому или иному отделу (или той или иной цели).

Отделов (или целей) к которым прикреплён один сотрудник может быть несколько. 

_**Начало и завершение рабочего дня**_
Функционал Начала рабочего дня позволяет очищать очередь, разблокирует возможность выдачи талонов и работы с ними.
Функционал Завершения рабочего дня также очищает очередь, блокирует возможность выдачи талонов и работы с ними.
Кроме того, функционал завершения рабочего дня обнуляет все номера талонов в таблице ticket_amount.