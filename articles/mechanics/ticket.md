# Работа с талоном

Работа с талоном обеспечивается следующими таблицами:

* ticket
* target
* ticket_amount
* ticket_operations

# Формирование талона

При формировании талона - создаётся запись в таблице ticket, в которой содержится информация о номере талона(порядковый номер талона в рамках 1 дня), публичном номере талона (состоит из префикса цели+номера аталона), дате его создания и т.д.
Номер формируется на основе prefix из таблицы target (запись определяется по id переданному на вход эндпоинта выдачи талона).

После формирования - номер талона сохраняется в таблице ticket_amount, в которой хранятся все номера талонов, в разрезе префиксов. Раз в сутки все номера обнуляются.
Любое действие с талоном - записывается в таблицу ticket_operations с указанием состояния талона

